<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh-CN">
<head th:fragment="head(title, description, keywords)">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:replace="${title}">视频网站</title>
    <meta name="description" th:attr="content=${description}">
    <meta name="keywords" th:attr="content=${keywords}">
    <meta name="referrer" content="origin">
    <link rel="icon" th:href="@{/images/logo.svg}" type="image/svg+xml"/>
    <!-- 直接引入CDN资源 -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white">
<!-- 头部导航 -->
<header th:fragment="header" class="bg-gray-900 shadow-md">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
            <div class="flex">
                <div class="flex-shrink-0 flex items-center">
                    <a th:href="@{'/'}" class="flex space-x-2 items-center">
                        <svg class="h-8 w-8 rounded-full object-cover text-yellow-400" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 960">
                            <path class="text-yellow-400" d="M110,168.2V180l0,0v13.2c20.2-13,44.3-20.5,70-20.5c71.7,0,130,58.3,130,130s-58.3,130-130,130c-25.8,0-49.8-7.5-70-20.5v135.6c20.2-13,44.3-20.5,70-20.5c71.7,0,130,58.3,130,130s-58.3,130-130,130c-25.8,0-49.8-7.5-70-20.5V780l0,0v11.8c0,77,83.3,125.1,150,86.6l540-311.8c66.7-38.5,66.7-134.7,0-173.2L260,81.6C193.3,43.1,110,91.2,110,168.2z M710,480L430,641.7V318.4L710,480z"/>
                            <path class="text-gray-300" d="M110,302.7c0,38.6,31.4,70,70,70s70-31.4,70-70s-31.4-70-70-70S110,264.1,110,302.7z"/>
                            <path class="text-gray-300" d="M110,657.3c1.6,92,138.4,92,140,0C248.3,565.3,111.6,565.3,110,657.3z"/>
                        </svg>


                        <span class="text-sm font-bold text-yellow-400">18log.com</span>
                    </a>
                </div>
                <nav class="ml-6 hidden md:flex lg:space-x-8 space-x-2">
                    <!-- 动态生成视频类型导航 -->
                    <a th:each="type : ${navVideoTypes}"
                       th:href="@{/list(typed=${type.modelTyped})}"
                       class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-300 hover:text-white hover:border-gray-300 focus:outline-none focus:text-white focus:border-gray-300 transition duration-150 ease-in-out"
                       th:classappend="${typed == type.modelTyped ? 'border-yellow-500 text-yellow-500' : ''}"
                       th:text="${type.title}">类型名称</a>
                </nav>
            </div>

            <!-- 桌面版搜索和用户菜单 -->
            <div class="hidden md:flex md:flex-row justify-end z-50 items-center gap-y-6 p-6 rounded-xl lg:gap-y-0 lg:p-0 md:flex-nowrap lg:bg-transparent">
                <div>
                    <form action="/search" method="get" class="flex">
                        <input type="text" name="keyword" placeholder="搜索..." class="px-3 py-1 rounded-l-md bg-gray-800 text-white focus:outline-none">
                        <button type="submit" class="bg-yellow-500 text-black px-3 py-1 rounded-r-md hover:bg-yellow-400">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.47 6.47 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14"/></svg>
                        </button>
                    </form>
                </div>

                <div class="ml-4 flex items-center md:ml-6">
                    <!-- 未登录状态 -->
                    <div th:if="${session.user == null}" class="flex items-center">
                        <a th:href="@{/user/login}" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">登录</a>
                        <a th:href="@{/user/register}" class="bg-yellow-500 text-black px-3 py-2 rounded-md text-sm font-medium hover:bg-yellow-400">注册</a>
                    </div>

                    <!-- 已登录状态 -->
                    <div th:if="${session.user != null}" class="relative">
                        <div class="flex items-center">
                            <button id="user-menu-button" class="flex items-center text-sm focus:outline-none">
                                <svg class="h-8 w-8 rounded-full object-cover" fill="currentColor" viewBox="0 0 960 960" xmlns="http://www.w3.org/2000/svg">
                                    <path class="text-gray-300" d="M234,684Q285,645 348,622.5Q411,600 480,600Q549,600 612,622.5Q675,645 726,684Q761,643 780.5,591Q800,539 800,480Q800,347 706.5,253.5Q613,160 480,160Q347,160 253.5,253.5Q160,347 160,480Q160,539 179.5,591Q199,643 234,684ZM480,520Q421,520 380.5,479.5Q340,439 340,380Q340,321 380.5,280.5Q421,240 480,240Q539,240 579.5,280.5Q620,321 620,380Q620,439 579.5,479.5Q539,520 480,520ZM480,880Q397,880 324,848.5Q251,817 197,763Q143,709 111.5,636Q80,563 80,480Q80,397 111.5,324Q143,251 197,197Q251,143 324,111.5Q397,80 480,80Q563,80 636,111.5Q709,143 763,197Q817,251 848.5,324Q880,397 880,480Q880,563 848.5,636Q817,709 763,763Q709,817 636,848.5Q563,880 480,880Z"/>
                                </svg>
                                <span class="ml-2 text-gray-300" th:text="${session.user.nickName}">用户昵称</span>
                                <svg class="ml-1 h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>

                        <!-- 下拉菜单 -->
                        <div id="user-menu" class="hidden absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-gray-800 ring-1 ring-black ring-opacity-5 z-10">
                            <a th:href="@{/user/profile}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">个人资料</a>
                            <a th:href="@{/user/logout}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">退出登录</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 移动端导航图标 -->
            <div class="flex md:hidden items-center space-x-4">

                <!-- 菜单图标 -->
                <button id="mobile-menu-button" class="text-gray-300 hover:text-white p-2">
                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 960 960">
                        <path d="M320,680Q337,680 348.5,668.5Q360,657 360,640Q360,623 348.5,611.5Q337,600 320,600Q303,600 291.5,611.5Q280,623 280,640Q280,657 291.5,668.5Q303,680 320,680ZM320,520Q337,520 348.5,508.5Q360,497 360,480Q360,463 348.5,451.5Q337,440 320,440Q303,440 291.5,451.5Q280,463 280,480Q280,497 291.5,508.5Q303,520 320,520ZM320,360Q337,360 348.5,348.5Q360,337 360,320Q360,303 348.5,291.5Q337,280 320,280Q303,280 291.5,291.5Q280,303 280,320Q280,337 291.5,348.5Q303,360 320,360ZM440,680L680,680L680,600L440,600L440,680ZM440,520L680,520L680,440L440,440L440,520ZM440,360L680,360L680,280L440,280L440,360ZM200,840Q167,840 143.5,816.5Q120,793 120,760L120,200Q120,167 143.5,143.5Q167,120 200,120L760,120Q793,120 816.5,143.5Q840,167 840,200L840,760Q840,793 816.5,816.5Q793,840 760,840L200,840Z"/>
                    </svg>
                </button>

                <!-- 搜索图标 -->
                <button id="mobile-search-button" class="text-gray-300 hover:text-white p-2">
                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 960 960">
                        <path d="M784,840L532,588Q502,612 463,626Q424,640 380,640Q271,640 195.5,564.5Q120,489 120,380Q120,271 195.5,195.5Q271,120 380,120Q489,120 564.5,195.5Q640,271 640,380Q640,424 626,463Q612,502 588,532L840,784L784,840ZM380,560Q455,560 507.5,507.5Q560,455 560,380Q560,305 507.5,252.5Q455,200 380,200Q305,200 252.5,252.5Q200,305 200,380Q200,455 252.5,507.5Q305,560 380,560Z"/>
                    </svg>
                </button>

                <!-- 用户图标 -->
                <button id="mobile-user-button" class="text-gray-300 hover:text-white p-2">
                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 960 960">
                        <path d="M234,684Q285,645 348,622.5Q411,600 480,600Q549,600 612,622.5Q675,645 726,684Q761,643 780.5,591Q800,539 800,480Q800,347 706.5,253.5Q613,160 480,160Q347,160 253.5,253.5Q160,347 160,480Q160,539 179.5,591Q199,643 234,684ZM480,520Q421,520 380.5,479.5Q340,439 340,380Q340,321 380.5,280.5Q421,240 480,240Q539,240 579.5,280.5Q620,321 620,380Q620,439 579.5,479.5Q539,520 480,520ZM480,880Q397,880 324,848.5Q251,817 197,763Q143,709 111.5,636Q80,563 80,480Q80,397 111.5,324Q143,251 197,197Q251,143 324,111.5Q397,80 480,80Q563,80 636,111.5Q709,143 763,197Q817,251 848.5,324Q880,397 880,480Q880,563 848.5,636Q817,709 763,763Q709,817 636,848.5Q563,880 480,880Z"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- 移动端搜索表单 (默认隐藏) -->
        <div id="mobile-search-form" class="md:hidden hidden py-2 pb-4">
            <form action="/search" method="get" class="flex">
                <input type="text" name="keyword" placeholder="搜索..." class="w-full px-3 py-2 rounded-l-md bg-gray-800 text-white focus:outline-none">
                <button type="submit" class="bg-yellow-500 text-black px-4 py-2 rounded-r-md hover:bg-yellow-400">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.47 6.47 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14"/></svg>
                </button>
            </form>
        </div>

        <!-- 移动端主菜单 (默认隐藏) -->
        <div id="mobile-main-menu" class="md:hidden hidden py-2 pb-4 bg-gray-800 rounded-md">
            <div class="px-4 py-2">
                <h3 class="text-sm font-medium text-gray-400 uppercase tracking-wider mb-2">视频分类</h3>
                <div class="grid grid-cols-2 gap-2">
                    <!-- 动态生成视频类型导航 -->
                    <a th:each="type : ${navVideoTypes}"
                       th:href="@{/list(typed=${type.modelTyped})}"
                       class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 transition duration-150 ease-in-out"
                       th:classappend="${typed == type.modelTyped ? 'bg-gray-700 text-white' : ''}"
                       th:text="${type.title}">类型名称</a>
                </div>
            </div>
        </div>

        <!-- 移动端用户菜单 (默认隐藏) -->
        <div id="mobile-user-menu" class="md:hidden hidden py-2 pb-4 bg-gray-800 rounded-md">
            <!-- 未登录状态 -->
            <div th:if="${session.user == null}" class="flex flex-col space-y-2 px-4">
                <a th:href="@{/user/login}" class="text-gray-300 hover:text-white py-2 text-sm font-medium">登录</a>
                <a th:href="@{/user/register}" class="bg-yellow-500 text-black py-2 px-4 rounded-md text-center text-sm font-medium hover:bg-yellow-400">注册</a>
            </div>

            <!-- 已登录状态 -->
            <div th:if="${session.user != null}" class="px-4">
                <div class="flex items-center py-2 border-b border-gray-700">
                    <svg class="h-8 w-8 rounded-full object-cover" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                        <path class="text-gray-300" d="M628.736 528.896A416 416 0 0 1 928 928H96a415.872 415.872 0 0 1 299.264-399.104L512 704l116.736-175.104zM720 304a208 208 0 1 1-416 0 208 208 0 0 1 416 0z" />
                    </svg>
                    <span class="ml-2 text-gray-300" th:text="${session.user.nickName}">用户昵称</span>
                </div>
                <div class="py-2 space-y-2">
                    <a th:href="@{/user/profile}" class="block py-2 text-sm text-gray-300 hover:text-white">个人资料</a>
                    <a th:href="@{/user/logout}" class="block py-2 text-sm text-gray-300 hover:text-white">退出登录</a>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- 主要内容 -->
<main th:fragment="main" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div th:replace="${content}">
        <!-- 页面内容将在这里替换 -->
    </div>
</main>


<!-- 页脚 -->
<footer th:fragment="footer" class="bg-gray-900 mt-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="flex flex-col md:flex-row justify-between">
            <div class="mb-6 md:mb-0">
                <h2 class="text-xl font-bold text-yellow-400 mb-4">视频网站</h2>
                <p class="text-gray-400">提供高清视频在线观看</p>
                <a href="https://app.18log.com" class="text-gray-400 hover:text-white">
                    镜像网站：https://app.18log.com
                </a>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-semibold text-white mb-4">关于我们</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white">关于我们</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">联系我们</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">用户协议</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">隐私政策</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-white mb-4">帮助中心</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white">常见问题</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">观看指南</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">反馈建议</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-white mb-4">关注我们</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white text-xl"><i class="fab fa-weibo"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white text-xl"><i class="fab fa-weixin"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white text-xl"><i class="fab fa-qq"></i></a>
                        <a href="https://github.com/darcychuchu/VlogWeb" target="_blank" class="text-gray-400 hover:text-white text-xl" title="GitHub开源项目"><i class="fab fa-github"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="mt-8 pt-8 border-t border-gray-800 text-center text-gray-400">
            <p>&copy; 2025 18log.com 版权所有</p>
            <p>
                <a href="https://github.com/darcychuchu/VlogWeb" target="_blank" class="text-yellow-400 hover:text-yellow-300">
                    <i class="fab fa-github mr-1"></i>开源项目 - 由 Augment AI 开发
                </a>
            </p>
        </div>
    </div>
</footer>

<!-- 完整页面布局 -->
<th:block th:fragment="layout(content)">
    <div th:replace="~{layout :: header}"></div>
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div th:replace="${content}">
            <!-- 页面内容将在这里替换 -->
        </div>
    </main>
    <div th:replace="~{layout :: footer}"></div>
    <!-- 脚本处理 -->
    <script>
        // 页面加载完成后初始化菜单
        document.addEventListener('DOMContentLoaded', function() {
            initUserMenu();
            initMobileMenu();
        });

        // 初始化桌面版用户菜单
        function initUserMenu() {
            const userMenuButton = document.getElementById('user-menu-button');
            const userMenu = document.getElementById('user-menu');

            if (userMenuButton && userMenu) {
                // 点击按钮显示/隐藏菜单
                userMenuButton.addEventListener('click', function() {
                    userMenu.classList.toggle('hidden');
                });

                // 点击其他地方隐藏菜单
                document.addEventListener('click', function(event) {
                    if (!userMenuButton.contains(event.target) && !userMenu.contains(event.target)) {
                        userMenu.classList.add('hidden');
                    }
                });
            }
        }

        // 初始化移动端菜单
        function initMobileMenu() {
            // 移动端菜单按钮
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMainMenu = document.getElementById('mobile-main-menu');

            // 移动端搜索按钮
            const mobileSearchButton = document.getElementById('mobile-search-button');
            const mobileSearchForm = document.getElementById('mobile-search-form');

            // 移动端用户按钮
            const mobileUserButton = document.getElementById('mobile-user-button');
            const mobileUserMenu = document.getElementById('mobile-user-menu');

            // 菜单按钮点击事件
            if (mobileMenuButton && mobileMainMenu) {
                mobileMenuButton.addEventListener('click', function() {
                    // 切换主菜单显示/隐藏
                    mobileMainMenu.classList.toggle('hidden');

                    // 关闭其他菜单
                    if (mobileSearchForm && !mobileSearchForm.classList.contains('hidden')) {
                        mobileSearchForm.classList.add('hidden');
                    }
                    if (mobileUserMenu && !mobileUserMenu.classList.contains('hidden')) {
                        mobileUserMenu.classList.add('hidden');
                    }
                });
            }

            // 搜索按钮点击事件
            if (mobileSearchButton && mobileSearchForm) {
                mobileSearchButton.addEventListener('click', function() {
                    // 切换搜索表单显示/隐藏
                    mobileSearchForm.classList.toggle('hidden');

                    // 关闭其他菜单
                    if (mobileMainMenu && !mobileMainMenu.classList.contains('hidden')) {
                        mobileMainMenu.classList.add('hidden');
                    }
                    if (mobileUserMenu && !mobileUserMenu.classList.contains('hidden')) {
                        mobileUserMenu.classList.add('hidden');
                    }
                });
            }

            // 用户按钮点击事件
            if (mobileUserButton && mobileUserMenu) {
                mobileUserButton.addEventListener('click', function() {
                    // 切换用户菜单显示/隐藏
                    mobileUserMenu.classList.toggle('hidden');

                    // 关闭其他菜单
                    if (mobileMainMenu && !mobileMainMenu.classList.contains('hidden')) {
                        mobileMainMenu.classList.add('hidden');
                    }
                    if (mobileSearchForm && !mobileSearchForm.classList.contains('hidden')) {
                        mobileSearchForm.classList.add('hidden');
                    }
                });
            }

            // 点击其他地方关闭移动端菜单
            document.addEventListener('click', function(event) {
                // 关闭主菜单
                if (mobileMainMenu && !mobileMainMenu.classList.contains('hidden') &&
                    !mobileMainMenu.contains(event.target) &&
                    !mobileMenuButton.contains(event.target)) {
                    mobileMainMenu.classList.add('hidden');
                }

                // 关闭搜索表单
                if (mobileSearchForm && !mobileSearchForm.classList.contains('hidden') &&
                    !mobileSearchForm.contains(event.target) &&
                    !mobileSearchButton.contains(event.target)) {
                    mobileSearchForm.classList.add('hidden');
                }

                // 关闭用户菜单
                if (mobileUserMenu && !mobileUserMenu.classList.contains('hidden') &&
                    !mobileUserMenu.contains(event.target) &&
                    !mobileUserButton.contains(event.target)) {
                    mobileUserMenu.classList.add('hidden');
                }
            });
        }
    </script>

</th:block>
</body>
</html>
